<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Kçº¿</title>
		<link rel="stylesheet" type="text/css" href="css/kline.css"/>
			<script>
	// åœ¨VueåŠ è½½ä¹‹å‰é¢„è®¾ç½®ç¯å¢ƒ - å®Œå…¨ç¦ç”¨Vue DevTools
	window.__VUE_DEVTOOLS_GLOBAL_HOOK__ = {
		isDisabled: true,
		enabled: false,
		emit: function() {},
		on: function() {},
		once: function() {},
		off: function() {},
		apps: []
	};
	
	// ç¦ç”¨Vueå¼€å‘æ¨¡å¼è­¦å‘Š
	if (typeof window !== 'undefined') {
		window.__VUE_PROD__ = true;
		window.__VUE_DEVTOOLS_HOST__ = undefined;
		window.__VUE_DEVTOOLS_PORT__ = undefined;
	}
	
	// æ‹¦æˆªå¯èƒ½çš„é”™è¯¯å’Œè­¦å‘Š
	window.addEventListener('error', function(e) {
		if (e.message && (
			e.message.includes('DevtoolsBackend') || 
			e.message.includes('emit is not a function') ||
			e.message.includes('preventDefault')
		)) {
			e.preventDefault();
			e.stopPropagation();
			return false;
		}
	}, true);
	
	// æ‹¦æˆªæ§åˆ¶å°è­¦å‘Š
	(function() {
		var originalWarn = console.warn;
		console.warn = function() {
			var args = Array.prototype.slice.call(arguments);
			var message = args.join(' ');
			
			// è¿‡æ»¤æ‰ passive event listener ç›¸å…³çš„è­¦å‘Š
			if (message.includes('passive event listener') || 
			    message.includes('preventDefault') ||
			    message.includes('[Violation]')) {
				return; // é™é»˜å¿½ç•¥
			}
			
			// å…¶ä»–è­¦å‘Šæ­£å¸¸è¾“å‡º
			return originalWarn.apply(console, arguments);
		};
	})();
	
	// è§£å†³è¢«åŠ¨äº‹ä»¶ç›‘å¬å™¨è­¦å‘Š - å¢å¼ºç‰ˆ
	(function() {
		var supportsPassive = false;
		try {
			var opts = Object.defineProperty({}, 'passive', {
				get: function() {
					supportsPassive = true;
				}
			});
			window.addEventListener('testPassive', null, opts);
			window.removeEventListener('testPassive', null, opts);
		} catch (e) {}

		if (!supportsPassive) {
			return; // æµè§ˆå™¨ä¸æ”¯æŒï¼Œç›´æ¥è¿”å›
		}

		// ä¿å­˜åŸå§‹æ–¹æ³•
		var originalAddEventListener = EventTarget.prototype.addEventListener;
		var originalRemoveEventListener = EventTarget.prototype.removeEventListener;
		
		// åŒ…è£…ç›‘å¬å™¨å‡½æ•°ï¼Œç¦æ­¢åœ¨ passive æ¨¡å¼ä¸‹è°ƒç”¨ preventDefault
		function wrapListener(listener, passive) {
			if (!passive || typeof listener !== 'function') {
				return listener;
			}
			
			return function wrappedListener(event) {
				// ä¿å­˜åŸå§‹çš„ preventDefault
				var originalPreventDefault = event.preventDefault;
				
				// é‡å†™ preventDefault ä¸ºç©ºæ“ä½œ
				event.preventDefault = function() {
					// åœ¨ passive æ¨¡å¼ä¸‹ï¼Œé˜»æ­¢ preventDefault è°ƒç”¨
					if (!event.defaultPrevented) {
						// é™é»˜å¿½ç•¥ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ
					}
				};
				
				// è°ƒç”¨åŸå§‹ç›‘å¬å™¨
				try {
					return listener.apply(this, arguments);
				} finally {
					// æ¢å¤åŸå§‹æ–¹æ³•
					event.preventDefault = originalPreventDefault;
				}
			};
		}
		
		// é‡å†™ addEventListener
		EventTarget.prototype.addEventListener = function(type, listener, options) {
			var useCapture = false;
			var passive = false;
			
			// å¤„ç† options å‚æ•°
			if (typeof options === 'boolean') {
				useCapture = options;
			} else if (typeof options === 'object' && options !== null) {
				useCapture = options.capture || false;
				passive = options.passive !== undefined ? options.passive : false;
			}
			
			// å¯¹äºè§¦æ‘¸å’Œæ»šè½®äº‹ä»¶ï¼Œé»˜è®¤ä½¿ç”¨ passive
			var passiveEvents = ['touchstart', 'touchmove', 'touchend', 'touchcancel', 'mousewheel', 'wheel', 'scroll'];
			if (passiveEvents.indexOf(type) !== -1) {
				if (typeof options !== 'object' || options === null || options.passive === undefined) {
					passive = true;
				}
			}
			
			// æ„å»ºæ–°çš„ options
			var newOptions = typeof options === 'object' && options !== null ? options : {};
			newOptions.passive = passive;
			newOptions.capture = useCapture;
			
			// åŒ…è£…ç›‘å¬å™¨
			var wrappedListener = wrapListener(listener, passive);
			
			// å­˜å‚¨æ˜ å°„å…³ç³»ï¼ˆç”¨äº removeEventListenerï¼‰
			if (!this.__eventListenerMap) {
				this.__eventListenerMap = new WeakMap();
			}
			if (listener && typeof listener === 'function') {
				this.__eventListenerMap.set(listener, wrappedListener);
			}
			
			return originalAddEventListener.call(this, type, wrappedListener, newOptions);
		};
		
		// é‡å†™ removeEventListener
		EventTarget.prototype.removeEventListener = function(type, listener, options) {
			var actualListener = listener;
			
			// å°è¯•è·å–åŒ…è£…åçš„ç›‘å¬å™¨
			if (this.__eventListenerMap && listener) {
				var wrapped = this.__eventListenerMap.get(listener);
				if (wrapped) {
					actualListener = wrapped;
				}
			}
			
			return originalRemoveEventListener.call(this, type, actualListener, options);
		};
	})();
	</script>
	</head>

	<body style="background: transparent; margin: 0; padding: 0;">
		<div id="app">
			<!-- åŠ è½½çŠ¶æ€ -->
			<div class="loading-placeholder" v-show="!txData.lastPrice" style="padding: 20px 16px; text-align: center; color: rgba(255,255,255,0.6); font-size: 14px;">
				{{loadingText}}
			</div>
			<div class="head" style="padding-top: 0;" v-show="txData.lastPrice">
				<div class="price">
					<span class="price-label" :class="txData.upFlag==1?'price-green':'price-red'">{{txData.lastPrice}}</span>
					<!-- <span class="price-value">â‰ˆ ${{txData.lastPrice}}</span> -->
				</div>
				<div class="price-stats">
					<div class="head-item-cell">
						<span class="hic-label">Open</span>
						<span class="hic-value" :class="txData.upFlag==1?'price-green':'price-red'">{{txData.volume}}</span>
					</div>
					<div class="head-item-cell">
						<span class="hic-label">24H Low</span>
						<span class="hic-value" :class="txData.upFlag==1?'price-green':'price-red'">{{txData.low}}</span>
					</div>
					<div class="head-item-cell high-price-cell">
						<span class="hic-label">24H High</span>
						<span class="hic-value high-price-value" :class="txData.upFlag==1?'price-green':'price-red'">{{txData.high}}</span>
					</div>
				</div>
				<!-- <div class="head-item">
					<div class="head-item-cell">
						<span class="hic-label">æœ€é«˜</span>
						<span class="hic-value" :class="txData.upFlag==1?'price-green':'price-red'">{{txData.high || 0}}</span>
					</div>
				</div>
				<div class="head-item">
					<div class="head-item-cell">
						<span class="hic-label">å¼€ç›˜</span>
						<span class="hic-value" :class="txData.upFlag==1?'price-green':'price-red'">{{txData.volume || 0}}</span>
					</div>
					<div class="head-item-cell">
						<span class="hic-label">æœ€ä½</span>
						<span class="hic-value" :class="txData.upFlag==1?'price-green':'price-red'">{{txData.low || 0}}</span>
					</div>
				</div> -->
			</div>
			<!-- æ–°é—»æ»šåŠ¨åŒºåŸŸ -->
			<div class="news-scroll-container">
				<div class="news-scroll-wrapper">
					<div class="news-item" v-for="(news, index) in visibleNews" :key="index">
						<span class="news-icon">ğŸ“¢</span>
						<span class="news-text">{{news}}</span>
					</div>
				</div>
			</div>
			<div class="tabs">
				<div @click="switchTab(item.value)" class="tabs-item" :class="{'tabs-item-active':current==item.value}" v-for="(item,index) in tabs" :key="index">
					<span class="tabs-item-text" :class="{'tabs-item-text-active':current==item.value}">{{item.label}}</span>
				</div>
			</div>
			<div class="charts-border">
				<div id="main" class="charts"></div>
				<div class="charts-label" v-show="MA5">
					<div class="charts-MA5">MA5:{{MA5}}</div>
					<div class="charts-MA10">MA10:{{MA10}}</div>
					<div class="charts-MA30">MA30:{{MA30}}</div>
				</div>
				<div class="charts-bar-label" v-show="volMA5">
					<div class="charts-MA5">MA5:{{volMA5}}</div>
					<div class="charts-MA10">MA10:{{volMA10}}</div>
				</div>
			</div>
			<!-- <div class="btns">
				<div @click="back1" class="btn btn-green">ä¹°å…¥</div>
				<div @click="back2" class="btn btn-red">å–å‡º</div>
			</div> -->
		</div>
		<script type="text/javascript" src="js/uni.webview.1.5.2.js"></script>
		<script type="text/javascript" src="js/echarts-passive-fix.js"></script>
		<script type="text/javascript" src="js/echarts.min.js"></script>
		<script type="text/javascript" src="js/qs.js"></script>
		<script type="text/javascript" src="js/axios.js"></script>
		<script type="text/javascript" src="js/vue.js"></script>
		<script type="text/javascript" src="js/mock.js"></script>
		<script type="text/javascript" src="js/kline.js"></script>
	</body>
	<script>
		// æ£€æµ‹å¹¶åº”ç”¨ä¸»é¢˜
		function checkTheme() {
			try {
				// å°è¯•ä» localStorage è·å–ä¸»é¢˜
				var theme = localStorage.getItem('theme') || 'dark';
				
				// åº”ç”¨ä¸»é¢˜åˆ° body
				if (theme === 'light') {
					document.body.classList.add('theme-light');
				} else {
					document.body.classList.remove('theme-light');
				}
			} catch (e) {
				console.log('Theme check error:', e);
			}
		}

		// é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ä¸»é¢˜
		checkTheme();

		// ç›‘å¬ä¸»é¢˜å˜åŒ–
		window.addEventListener('storage', function(e) {
			if (e.key === 'theme') {
				checkTheme();
			}
		});

		// å®šæœŸæ£€æŸ¥ä¸»é¢˜ï¼ˆç”¨äºåŒæ­¥æ›´æ–°ï¼‰
		setInterval(checkTheme, 1000);
	</script>
</html>
